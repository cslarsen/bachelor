Notater for Paxos-på-OpenFlow

- Meldinger fra klienter skal sendes til Paxos master.
  Dette kan implementeres som en flow-entry som automatisk
  forwarder til current master.
- Når vi endrer master så endrer vi denne flow-entryen.
  Flow-entryen må ligge i alle switcher, eller i switch som er koblet til
  WAN.

Hvordan kode inn crnd, vrnd osv?

MULIG vi kan bruke VLAN til dette.
Slik jeg ser det har vi 32-bits tilgjengelig, men jeg er usikker på hvilken
granularitet vi kan sette VLAN-data i flowtables.
Og usikker på om det påvirker pakken på noen måte (vi misbruker jo VLAN til
noe det ikke skal brukes til)

Versjoner av OpenFlow

Mininet støtter tydeligvis 1.3 fordi openvswitch støtter dette.
NOX og POX støtter KUN v1.0. Usikker på om dette er et problem, men vet at
v1.0 er ganske snever ifht v1.3.

Finnes en CPqD sak som ser ut til å ha modifisert mininet/nox (men ikke
POX!) til å støtte 1.3.. virker noe ustabil, men kan være godt nok for oss.
Men da må en kode kontroller i C++...

VLAN

Kan sette
VLAN ID, 12 bits
VLAN priority, 3 bits

Annet

Finnes en kø, bruker til QoS.
Kan sikkert legge inn pakker med prioritet her, usikker på om vi kan bruke
det til noe.

Worst-case scenario

Modifisere OpenVSwitch... det krever at vi modder OpenVSwitch, får den til å
kjøre under mininet (skal gå fint mener jeg) men også at vi lager nye
protokoller OG implementerer det vi trenger i controller-rammeverkene
(POX/NOX).

Det går an, men er ganske mye arbeid.
Så må vi velge en bra approach isåfall, altså en som kan funke bra i
hardware.  Og helst litt generelt, for vi kunne jo bare bakt paxos rett inn
i openvswitch om vi ville.. (det KAN vi også gjøre, det må være plan C)
Men føles som litt juks, da bruker vi ikke openflow engang.

Det som er greia er at vi ønsker å reagere på paxos-meldinger, og da
spesielt innholdet i disse...

ANNET vi kan bruke

FLOOD... det kan være greit å floode, men da helst bare til switchene, for
paxos-meldinger..

REPLICATOR

En idé om å lage switches som bruker paxos mellom for å lage ordering av
meldinger, så spyttes meldingene ut fra klienter til ALLE hosts, i samme
rekkefølge.. da kan vi sette opp tjenester på hosts og alle vil motta de
samme meldingene... eneste er jo svaret tilbake.. for deterministiske
systemer kan vi droppe alt utenom svar fra én (eller bare videresende første
svar vi får til klient).

MATCHING

Flow entries kan matche på

in-port, ether src, ether dst, ether type, vlan id, vlan pri, ip src, ip
dst, ip proto, ip ToS, tcp/udp src port, tcp/udp dst port
(dette er openflow 1.0)

går det an å matche en ip adr for subnett? altså masking?
(ja, ser sånn ut)

ipv6 kom ikke før i v1.2 eller v1.3 forøvrig.. og mininet støtter det
ikke. så idéen om å bruke ipv6 funker ikke..

fins også et "experimenter" felt, men det eksisterer bare mens pakken
håndteres i flow table tror jeg...

v1.3 har noe som heter metadata, som virker som bitmask som lever ila
flow-processing.

